# https://taskfile.dev

version: "3"
silent: true

tasks:
  default:
    cmds:
      - DEBUG=true go run ./cmd/enhance {{.CLI_ARGS}}
    interactive: true
  debug:
    cmds:
      - DEBUG=true go run ./cmd/enhance {{.CLI_ARGS}}
    interactive: true
  mock:
    cmds:
      - task: start-mock-server
      - defer: { task: stop-mock-server }
      - cmd: DEBUG=true FF_MOCK_DATA=true go run ./cmd/enhance -R neovim/neovim 34454
  start-mock-server:
    cmds:
      - killgrave --config ./imposters/config.yml &> ./.killgrave.log  &
    silent: true
  stop-mock-server:
    cmds:
      - pkill killgrave
    silent: true
